import{a as t,b as V,c as o,d as q,e as J,f as I,g as u}from"./chunk-BX2ZHUFS.js";var z=V((at,B)=>{B.exports=Serenity.Extensions});var m=o(I(),1);var P=class{};t(P,"ArticleColumns"),P.columnsKey="Articles.Article";var c=o(I(),1);var b=o(I(),1);var v=class extends b.EntityDialog{constructor(){super(...arguments);this.form=new y(this.idPrefix)}getFormKey(){return y.formKey}getRowDefinition(){return n}getService(){return E.baseUrl}};t(v,"CategoryDialog"),v=q([b.Decorators.registerClass("Dashboard.Articles.CategoryDialog")],v);var Q=o(u(),1);var h=class extends c.PrefixedContext{constructor(p){if(super(p),!h.init){h.init=!0;var e=c.StringEditor,i=c.HtmlContentEditor,s=c.ImageUploadEditor,d=c.LookupEditor,R=c.BooleanEditor,O=c.DateEditor,j=f;(0,Q.initFormType)(h,["Title",e,"HtmlContent",i,"Image",s,"AutherId",d,"IsActive",R,"CategoryId",d,"CreatedAt",O,"UpdatedAt",O,"CommentsGrid",j])}}},U=h;t(U,"ArticleForm"),U.formKey="Articles.Article";var X=o(u(),1);var l=class{};t(l,"ArticleRow"),l.idProperty="ArticleId",l.nameProperty="Title",l.localTextPrefix="Articles.Article",l.deletePermission="Articles:Articles",l.insertPermission="Articles:Articles",l.readPermission="Articles:Articles",l.updatePermission="Articles:Articles",l.Fields=(0,X.fieldsProxy)();var w=o(u(),1),k;(e=>(e.baseUrl="Articles/Article",e.Methods={Create:"Articles/Article/Create",Update:"Articles/Article/Update",Delete:"Articles/Article/Delete",Retrieve:"Articles/Article/Retrieve",List:"Articles/Article/List"},["Create","Update","Delete","Retrieve","List"].forEach(i=>{e[i]=function(s,d,R){return(0,w.serviceRequest)(e.baseUrl+"/"+i,s,d,R)}})))(k||(k={}));var H=class{};t(H,"CategoryColumns"),H.columnsKey="Articles.Category";var T=o(I(),1),K=o(u(),1);var L=class extends T.PrefixedContext{constructor(p){if(super(p),!L.init){L.init=!0;var e=T.StringEditor;(0,K.initFormType)(L,["Title",e])}}},y=L;t(y,"CategoryForm"),y.formKey="Articles.Category";var x=o(u(),1);var n=class{static getLookup(){return(0,x.getLookup)("Articles.Category")}static getLookupAsync(){return J(this,null,function*(){return(0,x.getLookupAsync)("Articles.Category")})}};t(n,"CategoryRow"),n.idProperty="CategoryId",n.nameProperty="Title",n.localTextPrefix="Articles.Category",n.lookupKey="Articles.Category",n.deletePermission="Articles:Categories",n.insertPermission="Articles:Categories",n.readPermission="Articles:Categories",n.updatePermission="Articles:Categories",n.Fields=(0,x.fieldsProxy)();var F=o(u(),1),E;(e=>(e.baseUrl="Articles/Category",e.Methods={Create:"Articles/Category/Create",Update:"Articles/Category/Update",Delete:"Articles/Category/Delete",Retrieve:"Articles/Category/Retrieve",List:"Articles/Category/List"},["Create","Update","Delete","Retrieve","List"].forEach(i=>{e[i]=function(s,d,R){return(0,F.serviceRequest)(e.baseUrl+"/"+i,s,d,R)}})))(E||(E={}));var A=class{};t(A,"CommentsColumns"),A.columnsKey="Articles.Comments";var G=o(u(),1);var a=class{};t(a,"CommentsRow"),a.idProperty="CommentId",a.nameProperty="Content",a.localTextPrefix="Articles.Comments",a.deletePermission="Articles:Comments",a.insertPermission="Articles:Comments",a.readPermission="Articles:Comments",a.updatePermission="Articles:Comments",a.Fields=(0,G.fieldsProxy)();var M=o(u(),1),D;(e=>(e.baseUrl="Articles/Comments",e.Methods={Create:"Articles/Comments/Create",Update:"Articles/Comments/Update",Delete:"Articles/Comments/Delete",Retrieve:"Articles/Comments/Retrieve",List:"Articles/Comments/List",DeleteList:"Articles/Comments/DeleteList"},["Create","Update","Delete","Retrieve","List","DeleteList"].forEach(i=>{e[i]=function(s,d,R){return(0,M.serviceRequest)(e.baseUrl+"/"+i,s,d,R)}})))(D||(D={}));var g;(s=>(s.Security="Administration:Security",s.Articles="Articles:Articles",s.Comments="Articles:Comments",s.Categories="Articles:Categories"))(g||(g={}));var S=o(u(),1),_=o(u(),1),N=o(z(),1);var f=class extends m.EntityGrid{constructor(e){super(e)}getColumnsKey(){return A.columnsKey}getRowDefinition(){return a}getService(){return D.baseUrl}getLocalTextPrefix(){return a.localTextPrefix}getButtons(){let e=super.getButtons();return e.forEach(i=>{i.visible=!1}),S.Authorization.hasPermission(g.Comments)&&e.push({title:"Delete Comments",icon:"fa fa-trash",visible:!0,cssClass:"delete-button",onClick:i=>{let s=this.rowSelection.getSelectedKeys();if(s.length>0){var d=new C;d.done=()=>this.rowSelection.resetCheckedAndRefresh(),d.execute(s)}else(0,S.notifyError)("Please Select Rows to submit")}}),e}createToolbarExtensions(){super.createToolbarExtensions(),S.Authorization.hasPermission(g.Comments)&&(this.rowSelection=new m.GridRowSelectionMixin(this))}getColumns(){let e=super.getColumns();return S.Authorization.hasPermission(g.Comments)&&e.splice(0,0,m.GridRowSelectionMixin.createSelectColumn(()=>this.rowSelection)),e}getInitialTitle(){return null}usePager(){return!0}getGridCanLoad(){return this.ArticleId!=null}get ArticleId(){return this._ArticleId}set ArticleId(e){this._ArticleId!=e&&(this._ArticleId=e,this.setEquality(l.Fields.ArticleId,e),this.refresh())}};t(f,"CommentsGrid"),f=q([m.Decorators.registerEditor("Dashboard.Articles.CommentsGrid")],f);var C=class extends N.BulkServiceAction{getParallelRequests(){return 10}getBatchSize(){return 5}sccss(){alert("sccss");debugger}executeForBatch(p){D.DeleteList({CommentIds:p.map(e=>(0,_.parseInteger)(e))},e=>{this.set_successCount(this.get_successCount()+p.length)},{blockUI:!1,onError:e=>this.set_errorCount(this.get_errorCount()+p.length),onCleanup:()=>this.serviceCallCleanup()})}};t(C,"DeleteBulkAction"),C=q([m.Decorators.registerClass("Dashboard.Articles.DeleteBulkAction")],C);export{P as a,v as b,U as c,l as d,k as e,H as f,n as g,E as h,f as i};
//# sourceMappingURL=chunk-UX23F3MH.js.map
